<body>
<div id="container" style="text-align:center;">

    <div id="p_id"  style="position: absolute; left: 200px; width:1200px; top:15px;">
        <h2 style="position: absolute; left: 380px; ">Interactive Record Linkage Configuration Panel</h2><br>
        <div style="position: absolute; left: 0; width: 100px;  text-align: center; top: 90px; font-weight: bold">Field</div>
        <div style="position: absolute; left: 70px; width: 150px;  text-align: center; top: 90px; font-weight: bold">Add Intervention</div>
        <div style="position: absolute; left: 250px; width: 150px;  text-align: center; top: 90px; font-weight: bold">(*)For Same Data:</div>
        <div style="position: absolute; left: 470px; width: 150px;  text-align: center; top: 90px; font-weight: bold">(**)For Missing Data:</div>
        <div style="position: absolute; left: 700px; width: 200px;  text-align: center; top: 90px; font-weight: bold">(+)For Similar Data:</div>
        <div style="position: absolute; left: 950px; width: 200px;  text-align: center; top: 90px; font-weight: bold">(++)For Very Different Data:</div>
        <div style="position: absolute; left: 1200px; width: 150px;  text-align: center; top: 90px; font-weight: bold">Swap Detection</div><br>
        <div id="name" style="position: absolute; left: 0; width: 100px;  text-align: center; top: 130px;">Names</div>
        <div id="id" style="position: absolute; left: 0; width: 100px;  text-align: center; top: 170px;">ID</div>
        <div id="dob" style="position: absolute; left: 0; width: 100px;  text-align: center; top: 210px;">DoB</div>
        <div id="race" style="position: absolute; left: 0; width: 100px;  text-align: center; top: 250px;">Race</div>
        <div id="gender" style="position: absolute; left: 0; width: 100px;  text-align: center; top: 290px;">Gender</div>

        <div id="n_options" style="position: absolute; left: 100px; top: 130px; text-align: center; display: inline;" >
            <div style="position:absolute;left:0;width:100px">
                <input type="radio" name="n_intervention" id="n1" value="Y">
                <label id="n1l" for="n1">Yes</label>
                <input type="radio" name="n_intervention" id="n2" value="N" checked="checked">
                <label id="n2l" for="n2">No</label>
            </div>
            <div style="position:absolute;left:100px;width:250px">
                <input type="radio" name="n_check" id="n3" value="Y">
                <label id="n3l" for="n3">Checkmark Mask</label>
                <input type="radio" name="n_check" id="n4" value="N" checked="checked">
                <label id="n4l" for="n4">No Mask</label>
            </div>
            <div style="position:absolute;left:350px;width:200px">
                <input type="radio" name="n_star" id="n5" value="Y">
                <label id="n5l" for="n5">Star Mask</label>
                <input type="radio" name="n_star" id="n6" value="N" checked="checked">
                <label id="n6l" for="n6">No Mask</label>
            </div>
            <div style="position:absolute;left:550px;width:300px">
                <input type="radio" name="n_similar" id="n7" value="A">
                <label id="n7l" for="n7">Show All</label>
                <input type="radio" name="n_similar" id="n8" value="D">
                <label id="n8l" for="n8">Show Diff Chars</label>
                <input type="radio" name="n_similar" id="n9" value="Y">
                <label id="n9l" for="n9">Use Mask</label>
            </div>
            <div style="position:absolute;left:850px;width:200px">
                <input type="radio" name="n_diff" id="n10" value="A">
                <label id="n10l" for="n10">Show All</label>
                <input type="radio" name="n_diff" id="n11" value="Y">
                <label id="n11l" for="n11">Use Mask</label>
            </div>
            <div style="position:absolute;left:1070px;width:200px">
                <input type="radio" name="n_swap" id="n12" value="Y">
                <label id="n12l" for="n12">Use Mask</label>
                <input type="radio" name="n_swap" id="n13" value="A">
                <label id="n13l" for="n13">No Mask</label>
                <input type="radio" name="n_swap" id="n14" value="N" checked="checked">
                <label id="n14l" for="n14">No</label>
            </div>
        </div>

        <div id="i_options" style="position: absolute; left: 100px; top: 170px; text-align: center; display: inline;" >
            <div style="position:absolute;left:0;width:100px">
                <input type="radio" name="i_intervention" id="i1" value="Y">
                <label id="i1l" for="i1">Yes</label>
                <input type="radio" name="i_intervention" id="i2" value="N" checked="checked">
                <label id="i2l" for="i2">No</label>
            </div>
            <div style="position:absolute;left:100px;width:250px">
                <input type="radio" name="i_check" id="i3" value="Y">
                <label id="i3l" for="i3">Checkmark Mask</label>
                <input type="radio" name="i_check" id="i4" value="N" checked="checked">
                <label id="i4l" for="i4">No Mask</label>
            </div>
            <div style="position:absolute;left:350px;width:200px">
                <input type="radio" name="i_star" id="i5" value="Y">
                <label id="i5l" for="i5">Star Mask</label>
                <input type="radio" name="i_star" id="i6" value="N" checked="checked">
                <label id="i6l" for="i6">No Mask</label>
            </div>
            <div style="position:absolute;left:550px;width:300px">
                <input type="radio" name="i_similar" id="i7" value="A">
                <label id="i7l" for="i7">Show All</label>
                <input type="radio" name="i_similar" id="i8" value="D">
                <label id="i8l" for="i8">Show Diff Chars</label>
                <input type="radio" name="i_similar" id="i9" value="Y">
                <label id="i9l" for="i9">Use Mask</label>
            </div>
            <div style="position:absolute;left:850px;width:200px">
                <input type="radio" name="i_diff" id="i10" value="A">
                <label id="i10l" for="i10">Show All</label>
                <input type="radio" name="i_diff" id="i11" value="Y">
                <label id="i11l" for="i11">Use Mask</label>
            </div>
        </div>

        <div id="d_options" style="position: absolute; left: 100px; top: 210px; text-align: center; display: inline;" >
            <div style="position:absolute;left:0;width:100px">
                <input type="radio" name="d_intervention" id="d1" value="Y">
                <label id="d1l" for="d1">Yes</label>
                <input type="radio" name="d_intervention" id="d2" value="N" checked="checked">
                <label id="d2l" for="d2">No</label>
            </div>
            <div style="position:absolute;left:100px;width:250px">
                <input type="radio" name="d_check" id="d3" value="Y">
                <label id="d3l" for="d3">Checkmark Mask</label>
                <input type="radio" name="d_check" id="d4" value="N" checked="checked">
                <label id="d4l" for="d4">No Mask</label>
            </div>
            <div style="position:absolute;left:350px;width:200px">
                <input type="radio" name="d_star" id="d5" value="Y">
                <label id="d5l" for="d5">Star Mask</label>
                <input type="radio" name="d_star" id="d6" value="N" checked="checked">
                <label id="d6l" for="d6">No Mask</label>
            </div>
            <div style="position:absolute;left:550px;width:300px">
                <input type="radio" name="d_similar" id="d7" value="A">
                <label id="d7l" for="d7">Show All</label>
                <input type="radio" name="d_similar" id="d8" value="D">
                <label id="d8l" for="d8">Show Diff Chars</label>
                <input type="radio" name="d_similar" id="d9" value="Y">
                <label id="d9l" for="d9">Use Mask</label>
            </div>
            <div style="position:absolute;left:850px;width:200px">
                <input type="radio" name="d_diff" id="d10" value="A">
                <label id="d10l" for="d10">Show All</label>
                <input type="radio" name="d_diff" id="d11" value="Y">
                <label id="d11l" for="d11">Use Mask</label>
            </div>
            <div style="position:absolute;left:1070px;width:200px">
                <input type="radio" name="d_swap" id="d12" value="Y">
                <label id="d12l" for="d12">Use Mask</label>
                <input type="radio" name="d_swap" id="d13" value="A">
                <label id="d13l" for="d13">No Mask</label>
                <input type="radio" name="d_swap" id="d14" value="N" checked="checked">
                <label id="d14l" for="d14" >No</label>
            </div>
        </div>

        <div id="r_options" style="position: absolute; left: 100px; top: 250px; text-align: center; display: inline;" >
            <div style="position:absolute;left:0;width:100px">
                <input type="radio" name="r_intervention" id="r1" value="Y">
                <label id="r1l" for="r1">Yes</label>
                <input type="radio" name="r_intervention" id="r2" value="N" checked="checked">
                <label id="r2l" for="r2">No</label>
            </div>
            <div style="position:absolute;left:100px;width:250px">
                <input type="radio" name="r_check" id="r3" value="Y">
                <label id="r3l" for="r3">Checkmark Mask</label>
                <input type="radio" name="r_check" id="r4" value="N" checked="checked">
                <label id="r4l" for="r4">No Mask</label>
            </div>
            <div style="position:absolute;left:350px;width:200px">
                <input type="radio" name="r_star" id="r5" value="Y">
                <label id="r5l" for="r5">Star Mask</label>
                <input type="radio" name="r_star" id="r6" value="N" checked="checked">
                <label id="r6l" for="r6">No Mask</label>
            </div>
            <div style="position:absolute;left:850px;width:200px">
                <input type="radio" name="r_diff" id="r10" value="A">
                <label id="r10l" for="r10">Show All</label>
                <input type="radio" name="r_diff" id="r11" value="Y">
                <label id="r11l" for="r11">Use Mask</label>
            </div>
        </div>

        <div id="g_options" style="position: absolute; left: 100px; top: 290px; text-align: center; display: inline;" >
            <div style="position:absolute;left:0;width:100px">
                <input type="radio" name="g_intervention" id="g1" value="Y">
                <label id="g1l" for="g1">Yes</label>
                <input type="radio" name="g_intervention" id="g2" value="N" checked="checked">
                <label id="g2l" for="g2">No</label>
            </div>
            <div style="position:absolute;left:100px;width:250px">
                <input type="radio" name="g_check" id="g3" value="Y">
                <label id="g3l" for="g3">Checkamrk Mask</label>
                <input type="radio" name="g_check" id="g4" value="N" checked="checked">
                <label id="g4l" for="g4">No Mask</label>
            </div>
            <div style="position:absolute;left:350px;width:200px">
                <input type="radio" name="g_star" id="g5" value="Y">
                <label id="g5l" for="g5">Star Mask</label>
                <input type="radio" name="g_star" id="g6" value="N" checked="checked">
                <label id="g6l" for="g6">No Mask</label>
            </div>
            <div style="position:absolute;left:850px;width:200px">
                <input type="radio" name="g_diff" id="g10" value="A">
                <label id="g10l" for="g10">Show All</label>
                <input type="radio" name="g_diff" id="g11" value="Y">
                <label id="g11l" for="g11">Use Mask</label>
            </div>
        </div>

        <div id="pairs" style="position: absolute; left: 0; top: 350px; text-align: center; display: inline;" >
            <hr width="300px" align="left">
            Number of Pairs Per Page:
            <input type="text" id="num_pair" name="num_pair" placeholder="Enter a positive integer."><br>
            <div style="position:absolute;left:-45px;width:300px; top: 80px" >
            <label id="grp" for="groups">Show Groups Instead of Pairs</label>
                <input type="checkbox" name="groups" id="groups">
            </div>
        </div>

        <div style="position: absolute; left: 0; width: 1200px;  text-align: left; top: 580px">
            (*): <strong>Checkmark mask</strong> covers a field if a pair of records share the same value in that field.<br>
            (**): <strong>Star mask</strong> covers a field if empty value is found in that field from one of the records in a pair.<br>
            (+): <strong>Similar data</strong> refers to a pair of non-empty values which are different. Interventions over
            <Strong>very different data</Strong> may overwrite these interventions.<br>
            (++): <strong>Very different data</strong> refers to the pair of non-empty values of which the editing distance is above some threshold.
        </div>
    </div>

    <div style="position: absolute; left: 500px; top:700px; width: 700px; text-align: left; display: inline;">
        <button id="consentYes" type="button" class="start-button" style="position: absolute; left: 400px;">Next</button>
    </div>
    <br>
    <p>
    <div id="validateMessage" class="validate"></div>
    </p>

    <br>
</div>
</body>
<style>
    #validateMessage {
        color: #FF5555;
    }
    body{
        color:#000;
        background-color:#fff;
    }

    #container{
        /*Styling for any element with the id="container" */
        width:1000px; /* The width is fixed by pixels */
        height:800px; /* The height is fixed by pixels*/
        color:black;
        background-color:white;
    }
</style>

<script>
    (function() {
        experimentr.data()['switch'] = [];
        experimentr.data()['files'] = {};
        experimentr.data()['time_of_website_start'] = Date.now();
        experimentr.data()['sign_in_session'] = false;
        experimentr.data()['sign_up_session'] = false;

        var dir = 'data/'+experimentr.data()['current_user'];


        $.getScript("javascript/misc/util.js");
        var data    = {}
            ,       w = 0
            ,       h = 0
            , field   = ["n","i","d","r","g"];
        init();

        function load(){
            w = $(window).width();
            h = $(window).height();
            console.log(w,h);
        }

        var sample_name;
        var section2_name;
        //parsing2("data/practice.csv","practice");
        //parsing("data/practice2.csv","practice2");
        //parsing("data/output.csv","mat");
        //parsing("data/section2.csv","section2");


        experimentr.data()["sample_name"] = sample_name;
        experimentr.data()["section2_sample_name"] = section2_name;

        function count(arr) {
            var a = [], b = [], prev;
            arr.sort();
            for ( var i = 0; i < arr.length; i++ ) {
                if ( arr[i] !== prev ) {
                    a.push(arr[i]);
                    b.push(1);
                } else {
                    b[b.length-1]++;
                }
                prev = arr[i];
            }
            return [a, b];
        }

        var page_nums = [];
        var num_in_page = [];
        d3.csv("/data/practice.csv", function(error, data) {
            if (error) throw error;
            data.forEach(function(d) {
                page_nums.push(d['type']);
            });
            num_in_page_pairs = count(page_nums)[1];
            num_in_page_pairs.forEach(function(d) {
                num_in_page.push(d/2);
            });
            num_in_page_parsed = [];
            num_in_page.forEach(function(d) {
                for(var i=0;i<d;i++) {
                    num_in_page_parsed.push(d);
                }
            });
        });

        function init() {
            experimentr.hideNext();

            load();
            for(var i in field){
                for(var j=3;j<15;j++){
                    if(d3.select('#'+field[i]+'2').attr("checked") && d3.select('#'+field[i]+j.toString())){
                        d3.select('#'+field[i]+j.toString()).attr("disabled","true");
                        d3.select('#'+field[i]+j.toString()+"l").style("color","#b3b3b3");
                    }
                }
            }
            // load previous workers file
            console.log(experimentr.data());
        }


        d3.select('#consentYes').on('click', function() {
            experimentr.addData(data);
            experimentr.data()['control_session'] = true;
            experimentr.save();
            //reload data
            if(experimentr.data()['show_group']){
                reload_group('mat');
            }else{
                reload('mat');
            }
            experimentr.data()['switch'].push(Date.now());
            experimentr.data()['control_session'] = false;
            experimentr.next();
        });

        d3.selectAll('input')
            .filter(function(d) { return this.name === 'n_intervention' ? this : null; })
            .on('change', function() { data.n_intervention = this.value;});
        d3.selectAll('input')
            .filter(function(d) { return this.name === 'i_intervention' ? this : null; })
            .on('change', function() { data.i_intervention = this.value;});
        d3.selectAll('input')
            .filter(function(d) { return this.name === 'd_intervention' ? this : null; })
            .on('change', function() { data.d_intervention = this.value;});
        d3.selectAll('input')
            .filter(function(d) { return this.name === 'r_intervention' ? this : null; })
            .on('change', function() { data.r_intervention = this.value;});
        d3.selectAll('input')
            .filter(function(d) { return this.name === 'g_intervention' ? this : null; })
            .on('change', function() { data.g_intervention = this.value;});

        d3.selectAll('input')
            .filter(function(d) { return this.name === 'n_check' ? this : null; })
            .on('change', function() { data.n_check = this.value;});
        d3.selectAll('input')
            .filter(function(d) { return this.name === 'i_check' ? this : null; })
            .on('change', function() { data.i_check = this.value;});
        d3.selectAll('input')
            .filter(function(d) { return this.name === 'd_check' ? this : null; })
            .on('change', function() { data.d_check = this.value;});
        d3.selectAll('input')
            .filter(function(d) { return this.name === 'r_check' ? this : null; })
            .on('change', function() { data.r_check = this.value;});
        d3.selectAll('input')
            .filter(function(d) { return this.name === 'g_check' ? this : null; })
            .on('change', function() { data.g_check = this.value;});

        d3.selectAll('input')
            .filter(function(d) { return this.name === 'n_star' ? this : null; })
            .on('change', function() { data.n_star = this.value;});
        d3.selectAll('input')
            .filter(function(d) { return this.name === 'i_star' ? this : null; })
            .on('change', function() { data.i_star = this.value;});
        d3.selectAll('input')
            .filter(function(d) { return this.name === 'd_star' ? this : null; })
            .on('change', function() { data.d_star = this.value;});
        d3.selectAll('input')
            .filter(function(d) { return this.name === 'r_star' ? this : null; })
            .on('change', function() { data.r_star = this.value;});
        d3.selectAll('input')
            .filter(function(d) { return this.name === 'g_star' ? this : null; })
            .on('change', function() { data.g_star = this.value;});

        d3.selectAll('input')
            .filter(function(d) { return this.name === 'n_similar' ? this : null; })
            .on('change', function() { data.n_similar = this.value;});
        d3.selectAll('input')
            .filter(function(d) { return this.name === 'i_similar' ? this : null; })
            .on('change', function() { data.i_similar = this.value;});
        d3.selectAll('input')
            .filter(function(d) { return this.name === 'd_similar' ? this : null; })
            .on('change', function() { data.d_similar = this.value;});

        d3.selectAll('input')
            .filter(function(d) { return this.name === 'n_diff' ? this : null; })
            .on('change', function() { data.n_diff = this.value;});
        d3.selectAll('input')
            .filter(function(d) { return this.name === 'i_diff' ? this : null; })
            .on('change', function() { data.i_diff = this.value;});
        d3.selectAll('input')
            .filter(function(d) { return this.name === 'd_diff' ? this : null; })
            .on('change', function() { data.d_diff = this.value;});
        d3.selectAll('input')
            .filter(function(d) { return this.name === 'r_diff' ? this : null; })
            .on('change', function() { data.r_diff = this.value;});
        d3.selectAll('input')
            .filter(function(d) { return this.name === 'g_diff' ? this : null; })
            .on('change', function() { data.g_diff = this.value;});

        d3.selectAll('input')
            .filter(function(d) { return this.name === 'n_swap' ? this : null; })
            .on('change', function() { data.n_swap = this.value;});
        d3.selectAll('input')
            .filter(function(d) { return this.name === 'd_swap' ? this : null; })
            .on('change', function() { data.d_swap = this.value;});

        d3.select('#n1').on('click', function(){
            d3.select('#n1').attr("checked", "checked");
            d3.select('#n3').attr("checked", "checked");
            d3.select('#n5').attr("checked", "checked");
            d3.select('#n7').attr("checked", "checked");
            d3.select('#n10').attr("checked", "checked");
            d3.select('#n12').attr("checked", "checked");
            for(var j=3;j<15;j++){
                if(d3.select('#n'+j.toString())){
                    d3.select('#n'+j.toString()).attr("disabled",null);
                    d3.select('#n'+j.toString()+"l").style("color","black");
                }
            }

            data.n_check = 'Y';
            data.n_star = 'Y';
            data.n_similar = 'A';
            data.n_diff = 'A';
            data.n_swap = 'Y';
        });
        d3.select('#i1').on('click', function(){
            for(var j=3;j<15;j++){
                if(d3.select('#i'+j.toString())){
                    d3.select('#i'+j.toString()).attr("disabled",null);
                    d3.select('#i'+j.toString()+"l").style("color","black");
                }
            }
            d3.select('#i3').attr("checked", "checked");
            d3.select('#i5').attr("checked", "checked");
            d3.select('#i8').attr("checked", "checked");
            d3.select('#i11').attr("checked", "checked");
            data.i_check = 'Y';
            data.i_star = 'Y';
            data.i_similar = 'Y';
            data.i_diff = 'Y';
        });
        d3.select('#d1').on('click', function(){
            for(var j=3;j<15;j++){
                if(d3.select('#d'+j.toString())){
                    d3.select('#d'+j.toString()).attr("disabled",null);
                    d3.select('#d'+j.toString()+"l").style("color","black");
                }
            }
            d3.select('#d3').attr("checked", "checked");
            d3.select('#d5').attr("checked", "checked");
            d3.select('#d7').attr("checked", "checked");
            d3.select('#d10').attr("checked", "checked");
            d3.select('#d12').attr("checked", "checked");
            data.d_check = 'Y';
            data.d_star = 'Y';
            data.d_similar = 'A';
            data.d_diff = 'A';
            data.d_swap = 'Y';
        });
        d3.select('#r1').on('click', function(){
            for(var j=3;j<15;j++){
                if(d3.select('#r'+j.toString())){
                    d3.select('#r'+j.toString()).attr("disabled",null);
                    d3.select('#r'+j.toString()+"l").style("color","black");
                }
            }
            d3.select('#r3').attr("checked", "checked");
            d3.select('#r5').attr("checked", "checked");
            d3.select('#r10').attr("checked", "checked");
            data.r_check = 'Y';
            data.r_star = 'Y';
            data.r_diff = 'A';
        });
        d3.select('#g1').on('click', function(){
            for(var j=3;j<15;j++){
                if(d3.select('#g'+j.toString())){
                    d3.select('#g'+j.toString()).attr("disabled",null);
                    d3.select('#g'+j.toString()+"l").style("color","black");
                }
            }
            d3.select('#g3').attr("checked", "checked");
            d3.select('#g5').attr("checked", "checked");
            d3.select('#g10').attr("checked", "checked");
            data.g_check = 'Y';
            data.g_star = 'Y';
            data.g_diff = 'A';
        });

        d3.select('#n2').on('click', function(){
            data.n_check = 'N';
            data.n_star = 'N';
            data.n_similar = 'N';
            data.n_diff = 'N';
            data.n_swap = 'N';
            for(var j=3;j<15;j++){
                if(d3.select('#n'+j.toString())){
                    d3.select('#n'+j.toString()).attr("disabled","true").property("checked",false);
                    d3.select('#n'+j.toString()+"l").style("color","#b3b3b3");
                }
            }
            d3.select('#n2').property("checked","checked");
            d3.select('#n4').property("checked","checked");
            d3.select('#n6').property("checked","checked");
            d3.select('#n14').property("checked","checked");
        });
        d3.select('#i2').on('click', function(){
            data.i_check = 'N';
            data.i_star = 'N';
            data.i_similar = 'N';
            data.i_diff = 'N';
            for(var j=3;j<15;j++){
                if(d3.select('#i'+j.toString())){
                    d3.select('#i'+j.toString()).attr("disabled","true").property("checked",false);
                    d3.select('#i'+j.toString()+"l").style("color","#b3b3b3");
                }
            }
            d3.select('#i2').property("checked","checked");
            d3.select('#i4').property("checked","checked");
            d3.select('#i6').property("checked","checked");
        });
        d3.select('#d2').on('click', function(){
            data.d_check = 'N';
            data.d_star = 'N';
            data.d_similar = 'N';
            data.d_diff = 'N';
            data.d_swap = 'N';
            for(var j=3;j<15;j++){
                if(d3.select('#d'+j.toString())){
                    d3.select('#d'+j.toString()).attr("disabled","true").property("checked",false);
                    d3.select('#d'+j.toString()+"l").style("color","#b3b3b3");
                }
            }
            d3.select('#d2').property("checked","checked");
            d3.select('#d4').property("checked","checked");
            d3.select('#d6').property("checked","checked");
            d3.select('#d14').property("checked","checked");
        });
        d3.select('#r2').on('click', function(){
            data.r_check = 'N';
            data.r_star = 'N';
            data.r_diff = 'N';
            for(var j=3;j<15;j++){
                if(d3.select('#r'+j.toString())){
                    d3.select('#r'+j.toString()).attr("disabled","true").property("checked",false);
                    d3.select('#r'+j.toString()+"l").style("color","#b3b3b3");
                }
            }
            d3.select('#r2').property("checked","checked");
            d3.select('#r4').property("checked","checked");
            d3.select('#r6').property("checked","checked");
        });
        d3.select('#g2').on('click', function(){
            data.g_check = 'N';
            data.g_star = 'N';
            data.g_diff = 'N';
            for(var j=3;j<15;j++){
                if(d3.select('#g'+j.toString())){
                    d3.select('#g'+j.toString()).attr("disabled","true").property("checked",false);
                    d3.select('#g'+j.toString()+"l").style("color","#b3b3b3");
                }
            }
            d3.select('#g2').property("checked","checked");
            d3.select('#g4').property("checked","checked");
            d3.select('#g6').property("checked","checked");
        });

        d3.selectAll('input')
            .filter(function(d) { return this.name === 'num_pair' ? this : null; })
            .on('change', function() { data.num_pairs = this.value;});

        d3.selectAll('input')
            .filter(function(d) { return this.name === 'groups' ? this : null; })
            .on('change', function() {
                if(d3.select("#groups").property("checked")) {
                    data.show_group = true;
                    d3.select("#num_pair").attr("disabled","true");
                    data.num_pairs = '1000000';
                }else{
                    data.show_group = false;
                    d3.select("#num_pair").attr("disabled",null);
                    data.num_pairs = '6';
                }
            });

        function get_os_info(){
            var OSName="Linux";
            if (navigator.appVersion.indexOf("Win")!=-1) OSName="Windows";
            if (navigator.appVersion.indexOf("Mac")!=-1) OSName="MacOS";
            //if (navigator.appVersion.indexOf("X11")!=-1) OSName="UNIX";
            //if (navigator.oscpu.indexOf("Linux")!=-1) OSName="Linux";
            return OSName;
        }
        function get_browser_info(){
            var ua=navigator.userAgent,tem,M=ua.match(/(opera|chrome|safari|firefox|msie|trident(?=\/))\/?\s*(\d+)/i) || [];
            console.log(ua);
            if(/trident/i.test(M[1])){
                tem=/\brv[ :]+(\d+)/g.exec(ua) || [];
                return 'IE '+(tem[1]||'');
            }
            if(M[1]==='Chrome'){
                tem=ua.match(/\bOPR\/(\d+)/)
                if(tem!=null)   {return 'Opera '+tem[1];}
            }
            M=M[2]? [M[1], M[2]]: [navigator.appName, navigator.appVersion, '-?'];
            if((tem=ua.match(/version\/(\d+)/i))!=null) {M.splice(1,1,tem[1]);}
            return {
                name: M[0],
                version: M[1]
            }
        }
    }());

</script>
